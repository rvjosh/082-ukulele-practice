<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ”Š</text></svg>">
  <title>Tones</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div class="min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 p-8">
    <div class="max-w-2xl mx-auto">
      <a href="index.html" class="text-amber-600 hover:text-amber-800 mb-4 inline-block">&larr; Back</a>
      <h1 class="text-3xl font-bold text-amber-900 text-center mb-8">Tones</h1>

      <div class="bg-white rounded-xl shadow-lg p-6">
        <div id="buttons" class="grid grid-cols-7 gap-2"></div>
      </div>
    </div>
  </div>

  <script>
    const noteFrequencies = {
      'C2': 65.41, 'D2': 73.42, 'E2': 82.41, 'F2': 87.31, 'G2': 98.00, 'A2': 110.00, 'B2': 123.47,
      'C3': 130.81, 'D3': 146.83, 'E3': 164.81, 'F3': 174.61, 'G3': 196.00, 'A3': 220.00, 'B3': 246.94,
      'C4': 261.63, 'D4': 293.66, 'E4': 329.63, 'F4': 349.23, 'G4': 392.00, 'A4': 440.00, 'B4': 493.88,
      'C5': 523.25, 'D5': 587.33, 'E5': 659.25, 'F5': 698.46, 'G5': 783.99, 'A5': 880.00, 'B5': 987.77,
      'C6': 1046.50, 'D6': 1174.66, 'E6': 1318.51, 'F6': 1396.91, 'G6': 1567.98, 'A6': 1760.00, 'B6': 1975.53,
      'C7': 2093.00
    };

    let audioContext = null;
    let currentOscillator = null;
    let currentGain = null;

    function getAudioContext() {
      if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
      }
      return audioContext;
    }

    function playNote(note) {
      const ctx = getAudioContext();

      // Stop current note if playing
      if (currentOscillator) {
        currentGain.gain.cancelScheduledValues(ctx.currentTime);
        currentGain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.05);
        currentOscillator.stop(ctx.currentTime + 0.05);
      }

      const oscillator = ctx.createOscillator();
      const gainNode = ctx.createGain();

      oscillator.connect(gainNode);
      gainNode.connect(ctx.destination);

      oscillator.type = 'sine';
      oscillator.frequency.value = noteFrequencies[note];

      gainNode.gain.setValueAtTime(0, ctx.currentTime);
      gainNode.gain.linearRampToValueAtTime(0.5, ctx.currentTime + 0.01);
      gainNode.gain.linearRampToValueAtTime(0.4, ctx.currentTime + 1.5);
      gainNode.gain.linearRampToValueAtTime(0, ctx.currentTime + 2.0);

      oscillator.start(ctx.currentTime);
      oscillator.stop(ctx.currentTime + 2.0);

      currentOscillator = oscillator;
      currentGain = gainNode;

      oscillator.onended = () => {
        if (currentOscillator === oscillator) {
          currentOscillator = null;
          currentGain = null;
        }
      };
    }

    const container = document.getElementById('buttons');
    Object.keys(noteFrequencies).forEach(note => {
      const btn = document.createElement('button');
      btn.textContent = note;
      btn.className = 'bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 px-4 rounded-lg transition-colors';
      btn.onclick = () => playNote(note);
      container.appendChild(btn);
    });
  </script>
</body>
</html>
